"0","#http://dpmartin42.github.io/posts/Piecewise-growth"
"0","hc <-"
"0","  hc %>% "
"0","  mutate("
"0","    seg_week_cent_birth = if_else("
"0","      !is.na(gestational_weeks_birth),"
"0","      seg_week - gestational_weeks_birth,"
"0","      seg_week - mean_gestionational_weeks_birth"
"0","    ),"
"0","    # if gestational week of segment is < gestational weeks at birth = gestational week of segment - gestational weeks at birth (i.e, if born at 40 weeks and segment gestational week is 30 weeks = -10); otherwise = 0"
"0","    seg_week_preg = case_when("
"0","      !is.na(gestational_weeks_birth) & seg_week < gestational_weeks_birth ~ seg_week_cent_birth,"
"0","      is.na(gestational_weeks_birth) & seg_week < mean_gestionational_weeks_birth ~ seg_week_cent_birth,"
"0","      !is.na(gestational_weeks_birth) & seg_week > gestational_weeks_birth ~ 0,"
"0","      is.na(gestational_weeks_birth) & seg_week > mean_gestionational_weeks_birth ~ 0"
"0","    ),"
"0","     # if gestational week of segment is > gestational weeks at birth = gestational week of segment - gestational weeks at birth (i.e, if born at 40 weeks and segment gestational week is 50 weeks = 10); otherwise = 0"
"0","    seg_week_post = case_when("
"0","      !is.na(gestational_weeks_birth) & seg_week > gestational_weeks_birth ~ seg_week_cent_birth,"
"0","      is.na(gestational_weeks_birth) & seg_week > mean_gestionational_weeks_birth ~ seg_week_cent_birth,"
"0","      !is.na(gestational_weeks_birth) & seg_week < gestational_weeks_birth ~ 0,"
"0","      is.na(gestational_weeks_birth) & seg_week < mean_gestionational_weeks_birth ~ 0"
"0","    )"
"0","  )"
